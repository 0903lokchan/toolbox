{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block scripts %}
    <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script>
        $(document).ready(function(){
            $('form').submit(function cal_sim(e) {
                                var url = "{{ url_for('dice_cal.cal_sim') }}";
                                $.ajax({
                                    type: "POST",
                                    url: url,
                                    data: $('form').serialize(),
                                    success: function (data) {
                                        $(result).html(data);
                                        console.log(data);
                                    }
                                });
                                e.preventDefault();
                            });
            $.ajaxSetup({
                beforeSend: function(xhr, settings) {
                    if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                        xhr.setRequestHeader("X-CSRFToken", "{{ form.csrf_token._value() }}")
                    }
                }
            })
        });

    </script>
{% endblock scripts %}

{% block app_content %}
    <div class="container-fluid">
        <div class="row">
            <h1>Dice Probability Calculator</h1>
        </div>
        <div class="row">
            <div class="col-sm-4">
                {% if form %}
                {{ wtf.quick_form(form) }}
                {% endif %}
                <br><br>
                <span class="border"><p id="result">Result displays here</p></span>
            </div>
            <div class="col-sm-8">
                <p>
                    This Calculator accepts input with (number of dice) * (number of sides) less than 
                    10000 to do simulation of all possilble outcomes of input dice set. Then probability 
                    of all possible outcomes are then displayed in the result field, rounded to 6 decimal points.
                </p>
            </div>
        </div>
    </div>
{% endblock app_content %}